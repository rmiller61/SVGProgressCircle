!function(a){var b=function(c,d){this.element=a(c),this.numberWrapper=this.element.find(".number"),this.animated=!1,this.options=a.extend({},b.Defaults,d),this.initNumber()};b.Defaults={number:0,min:0,max:100,speed:2e3,delay:0,prefix:"",suffix:"",offset:"80%",loop:!1,format:{decimal:".",thousands_sep:","},onInit:null,onComplete:null},b.prototype={initNumber:function(){var a=this;void 0!==jQuery.fn.waypoint?this.numberWrapper.waypoint({offset:a.options.offset,triggerOnce:!0,handler:function(b){a.initCount(),a.afterInit()}}):(a.initCount(),a.afterInit())},initCount:function(){this.numberWrapper.find(".number-string");!isNaN(this.options.delay)&&this.options.delay>0?setTimeout(function(){this.triggerCircle(),this.countNumber()}.bind(this),this.options.delay):(this.triggerCircle(),this.countNumber())},countNumber:function(){var a=this.numberWrapper.find(".number-string"),b=a.find(".number-int"),c=this.options.min,d=this;this.animated||b.prop("Counter",c).animate({Counter:this.options.number},{duration:this.options.speed,easing:"swing",step:function(a,c){b.text(d.options.prefix+d.formatNumber(Math.ceil(a)+d.options.suffix))},complete:function(){!0===d.options.loop?setTimeout(function(){d.countNumber()},d.options.delay):d.animated=!0}})},triggerCircle:function(){var a=this.numberWrapper.find(".bar"),b=a.attr("r"),c=Math.PI*(2*b),d=this.options.number,e=this.options.min,f=this.options.max;d<0&&(d=0),d>f&&(d=f);var g=(1-(d-e)/f)*c;this.animateCircle(g)},animateCircle:function(a){var b=this.numberWrapper.find(".bar"),c=this.options.speed,d=this.options.loop,e=b.attr("stroke-dashoffset"),f=this;b.animate({strokeDashoffset:a},{duration:c,easing:"swing",complete:function(){!0===d&&setTimeout(function(){b.css("stroke-dashoffset",e),f.triggerCircle()},f.options.delay),f.afterComplete()}})},formatNumber:function(a){var b=/(\d+)(\d{3})/;for(a+="",x=a.split("."),x1=x[0],x2=x.length>1?parseFloat(parseFloat("."+x[1]).toFixed(2)):"",x2=x2?this.options.format.decimal+x2.toString().split(".").pop():"";b.test(x1);)x1=x1.replace(b,"$1"+this.options.format.thousands_sep+"$2");return x1+x2},afterInit:function(){var a=this.options.onInit;a&&"function"==typeof a&&a()},afterComplete:function(){var a=this.options.onComplete;a&&"function"==typeof a&&a()}},a.fn.progressCircle=function(c){return this.each(function(){a(this).data("progressCircle")||a(this).data("progressCircle",new b(this,c))})},a.fn.progressCircle.Constructor=b}(jQuery);